---
layout: default
title: Table expanding
category: _patterns
---
<style>
.p-table-expanding .p-table-expanding__button {
    margin: 0 .5rem 0 0;
    padding: 0 .25rem;
}

.p-table-expanding .p-table-expanding__button-icon {
    display: block;
    top: 0;
}

.p-table-expanding__panel {
    border-top: 1px solid #cdcdcd;
}

.p-table-expanding__inner-table {
    margin: 0 0 0 3rem;
    width: calc(100% - 3rem);
}

.p-table-expanding table td {
    padding-right: 0;
}

.p-table-expanding table td:first-child {
    margin-right: -3rem;
    padding-left: 0;
}

</style>
<table class="p-table-expanding" role="grid">
    <thead>
        <tr role="row">
            <th>Name</th>
            <th>Review results</th>
            <th>Action</th>
            <th class="u-hide">
                <!-- empty cell required for validation -->
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <button class="p-button--base p-table-expanding__button u-toggle" aria-controls="#expanded-row" aria-expanded="false">
                    <i class="p-icon--plus p-table-expanding__button-icon"></i>
                </button>
                <span>Anthony Dillon</span>
            </td>
            <td>Peak performer</td>
            <td><a href="#">View results</a></td>
            <td id="expanded-row" class="p-table-expanding__panel u-no-padding" aria-hidden="true">
                <table class="p-table-expanding__inner-table">
                    <tbody>
                        <tr>
                            <td>Caleb Ellis</td>
                            <td>Peak performer</td>
                            <td><a href="#">View results</a></td>
                        </tr>
                        <tr>
                            <td>Karl Williams</td>
                            <td>Peak performer</td>
                            <td><a href="#">View results</a></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr role="row">
            <td role="rowheader" aria-label="Name">
                <button class="p-button--base u-toggle p-table-expanding__button" aria-controls="#expanded-row2" aria-expanded="false">
                    <i class="p-icon--plus p-table-expanding__button-icon"></i>
                </button>
                <span>Carla Berkers</span>
            </td>
            <td>Peak performer</td>
            <td><a href="#">View results</a></td>
            <td id="expanded-row2" class="p-table-expanding__panel u-no-padding" aria-hidden="true">
                <table class="p-table-expanding__inner-table">
                    <tbody>
                        <tr>
                            <td>Juan Real</td>
                            <td>Peak performer</td>
                            <td><a href="#">View results</a></td>
                        </tr>
                        <tr>
                            <td>Claudio Gomboli</td>
                            <td>Peak performer</td>
                            <td><a href="#">View results</a></td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>

<script>
    (function () {
        /**
         * Toggle target elements with aria controls, hidden and expanded
         *
         * @param {String} toggleCtrl
         *
         * @example
         * <button class="u-toggle" aria-controls="#menu" aria-expanded="false">Toggle</button>
         * <div id="menu" aria-hidden="true">
         *     <p>Example menu</p>
         * </div>
         */

        function toggle(toggleCtrl) {

            // Select all toggle control elements
            var t = document.querySelectorAll(toggleCtrl);

            // Loop through all toggle control elements
            for (i = 0; i < t.length; i++) {

                // Set click event to each toggle control element
                t[i].addEventListener('click', function (event) {

                    // Get toggle aria-control target
                    var target = document.querySelector(
                        this.getAttribute('aria-controls'));

                    // If target hidden is already true set to fale and toggle
                    // control expanded to be true / false
                    if (target.getAttributeNode("aria-hidden").value == 'true') {
                        this.setAttribute('aria-expanded', 'true');
                        this.innerHTML = '<i class="p-icon--minus p-table-expanding__button-icon"></i>';
                        target.setAttribute('aria-hidden', 'false');
                    } else {
                        this.setAttribute('aria-expanded', 'false');
                        this.innerHTML = '<i class="p-icon--plus p-table-expanding__button-icon"></i>';
                        target.setAttribute('aria-hidden', 'true');
                    }
                });
            }
        }

        toggle('.u-toggle');
    })()
</script>
