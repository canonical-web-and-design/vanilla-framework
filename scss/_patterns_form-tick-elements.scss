@import 'settings';

@mixin vf-p-form-tick-elements {
  %p-tick-input {
    position: relative;
    top: 0.15rem; // nudge a bit below baseline (to correctly align with default text size)

    // hide native element (but position in correct place for native validation tooltips)
    [type='checkbox'],
    [type='radio'] {
      bottom: 0;
      height: $form-tick-box-size;
      margin: 0;
      opacity: 0;
      position: absolute;
      width: $form-tick-box-size;
    }

    // prepare fake tick element
    label {
      margin: 0;

      &::before {
        bottom: 0;
        top: auto;
      }

      &::after {
        top: auto;
      }
    }

    // // position the tick in checkbox
    // [type='checkbox'] + label {
    //   &::after {
    //     bottom: $form-tick-box-size - $form-tick-height - $form-tick-offset-top;
    //   }
    // }

    // // position the dot in radio
    // [type='radio'] + label {
    //   &::after {
    //     bottom: $form-radio-circle-offset;
    //   }
    // }
  }

  %p-tick-element {
    @extend %vf-tick-wrapper;

    &.is-disabled .p-checkbox__label {
      @extend %vf-disabled-element;
    }
  }

  .p-radio,
  .p-checkbox {
    @extend %p-tick-element;

    // &__input {
    //   @extend %p-tick-input;
    // }

    // when tick elements are following each other in the document
    // keep them closer together by 1 baseline grid unit
    & + .p-checkbox,
    & + .p-radio {
      margin-top: -$sp-unit;
    }
  }

  [type='checkbox'].p-checkbox__input {
    @extend %vf-hidden-tick-input;
    @extend %vf-tick-elements;

    & + .p-checkbox__label {
      @extend %vf-checkbox-label;
    }

    &:checked {
      // tick / inner radio circle
      & + .p-checkbox__label {
        @extend %vf-ticked-checkbox-label;
      }
    }
  }

  [type='radio'].p-radio__input {
    @extend %vf-hidden-tick-input;
    @extend %vf-tick-elements;

    & + .p-radio__label {
      @extend %vf-radio-label;
    }

    &:checked {
      & + .p-radio__label {
        @extend %vf-ticked-radio-label;
      }
    }
  }

  .p-radio--inline,
  .p-checkbox--inline {
    @extend %p-tick-element;

    display: inline-flex;

    .p-radio__label,
    .p-checkbox__label {
      margin: 0;
      padding: 0;
    }
  }

  .p-radio--heading,
  .p-checkbox--heading {
    @extend %p-tick-element;

    .p-radio__label,
    .p-checkbox__input {
      top: 0;
    }

    .p-radio__label,
    .p-checkbox__label {
      margin: 0;
      padding: 0;
    }
  }
}
