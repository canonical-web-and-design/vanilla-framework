@import 'settings';

@mixin vf-p-table-mobile-card {
  .p-table--mobile-card {
    @media screen and (max-width: $breakpoint-medium) {
      thead {
        display: none;
      }

      tr {
        $conditional-multi: if($multi > -1, $multi - 1, $multi);

        align-items: flex-end;
        background: $color-x-light;
        border-radius: $border-radius;
        box-shadow: 0 1px 5px 1px transparentize($color-dark, .8);
        display: flex;
        flex: {
          direction: column;
          wrap: wrap;
        }
        justify-content: center;
        margin-bottom: $conditional-multi * map-get($spv, default);
        padding: 0 map-get($spv, default);
        width: 100%;
      }

      td,
      tbody th {
        margin: 0;
        overflow: visible;
        padding-top: map-get($nudges, nudge--p);
        width: 100%;

        &:not(:last-child) {
          padding-bottom: 0;
        }

        &[aria-label] {
          flex-basis: 50%;
          max-width: 50%;
          position: relative;
          text-align: right;

          &::before {
            content: attr(aria-label);
            display: block;
            font-weight: 400;
            height: 100%;
            left: -100%;
            overflow: auto;
            position: absolute;
            text-align: left;
            width: 100%;
          }
        }
      }

      // Styles contextual menus differently within mobile-card tables
      .p-contextual-menu {
        width: 100%;

        // Initial menu item for actions should be hidden
        [role="menuitem"] {
          display: none;
        }

        &__dropdown {
          box-shadow: none;
          display: block;
          max-width: 100%;
          position: relative;

          &::before {
            display: none;
          }
        }

        &__group {
          padding: 0;

          + .p-contextual-menu__group {
            margin-top: $sp-small;
            padding-top: $sp-small;
          }
        }

        // Any link items should be styled as a button element
        &__link {
          border: {
            color: $color-mid-light;
            radius: .125rem;
            style: solid;
            width: 1px;
          }
          box-sizing: border-box;
          color: $color-x-dark;
          cursor: pointer;
          display: block;
          line-height: $sp-medium;
          outline: none;
          padding: $sp-small $sp-large;
          text-align: center;
          text-decoration: none;
          width: 100%;

          + .p-contextual-menu__link {
            margin-top: $sp-x-small;
          }
        }
      }
    }
  }
}
